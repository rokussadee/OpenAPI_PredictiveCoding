{"kind":"Notebook","sha256":"c965621a00336f594d3b3c4921f5f11c0c2ffa54b19c302bf45688a023db90a4","slug":"chatbot","location":"/notebooks/chatbot.ipynb","dependencies":[],"frontmatter":{"title":"metacognitive prompting","content_includes_title":false,"github":"https://github.com/rokussadee/OpenAPI_metacognitivePrompting","keywords":[],"exports":[{"format":"ipynb","filename":"chatbot.ipynb","url":"/chatbot-af5d9c3d8fa670038415567fc62fe976.ipynb"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"import statements","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QwjAqPEKbT"}],"identifier":"import-statements","label":"import statements","html_id":"import-statements","implicit":true,"key":"XfKcMhQfms"}],"data":{"type":"notebook-content","collapsed":false},"key":"qsgMGyAnow"},{"type":"block","children":[{"type":"code","lang":"python","executable":true,"value":"from openai import OpenAI\nfrom dotenv import load_dotenv\nfrom ipywidgets import widgets, Output\nfrom IPython.display import display\nimport os\nimport threading","key":"xMZgkkJ2kR"},{"type":"output","id":"Sq_jfP0ezq7iiyEPtgQaE","data":[],"key":"mVXNMSeOQn"}],"data":{"type":"notebook-code","ExecuteTime":{"end_time":"2024-02-21T12:42:13.008997Z","start_time":"2024-02-21T12:42:12.960807Z"}},"key":"ZrB8vAoWAX"},{"type":"block","children":[{"type":"code","lang":"python","executable":true,"value":"load_dotenv()\ntext_input=\"\"\nchat_history = {\n    \n}\nchat_output=Output()\nactive = True\nprocessing_message = threading.Event()","key":"gg2jcIl32R"},{"type":"output","id":"_af8O_k67bhVfdWWEcjbw","data":[],"key":"zURfv5qrXE"}],"data":{"type":"notebook-code","collapsed":false,"ExecuteTime":{"end_time":"2024-02-21T12:42:13.031896Z","start_time":"2024-02-21T12:42:13.014508Z"}},"key":"tfXIBGGerA"},{"type":"block","children":[{"type":"code","lang":"python","executable":true,"value":"apikey = os.getenv(\"OPENAI_API_KEY\")\nclient = OpenAI(\n    api_key=apikey\n)\nprint(client)","key":"eGKS7np7f9"},{"type":"output","id":"4Py3VHNaeRuQqzXBBssFN","data":[{"name":"stdout","output_type":"stream","text":"<openai.OpenAI object at 0x107821f40>\n"}],"key":"lBsqhz1tIe"}],"data":{"type":"notebook-code","collapsed":false,"ExecuteTime":{"end_time":"2024-02-21T12:42:13.135897Z","start_time":"2024-02-21T12:42:13.029401Z"}},"key":"fTAYixquYI"},{"type":"block","children":[{"type":"code","lang":"python","executable":true,"value":"def new_chat():\n    chat_history.clear()","key":"DSJm7PDEgL"},{"type":"output","id":"RZZb89oJiSAYCOOeLSu2A","data":[],"key":"YGo6aWFqhO"}],"data":{"type":"notebook-code","collapsed":false,"ExecuteTime":{"end_time":"2024-02-21T12:42:13.242283Z","start_time":"2024-02-21T12:42:13.124770Z"}},"key":"g6mUREEZE3"},{"type":"block","children":[{"type":"admonition","class":"dropdown ","children":[{"type":"admonitionTitle","children":[{"type":"inlineCode","value":"stream_chatbot","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cMV42MfkvA"},{"type":"text","value":" docs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"asruKL112z"}],"key":"YvGBGBcFTz"},{"type":"heading","depth":2,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"inlineCode","value":"stream_chatbot(message)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"r7cUxaxr7u"}],"identifier":"stream-chatbot-message","label":"stream_chatbot(message)","html_id":"stream-chatbot-message","implicit":true,"key":"jfHbIKvhgg"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"This function interacts with the chatbot using stream functionality.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"yg05DOXk3U"}],"key":"vGlUcvOMnJ"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Parameters:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"E2CXmxGdQ5"}],"key":"CN47XbY2fb"}],"key":"mwAhKiFJgG"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"inlineCode","value":"message","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"NLJzUjcCRj"},{"type":"text","value":": The message sent by the user to the chatbot.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"H73QFejiwu"}],"key":"wmizx17X0W"}],"key":"Ko0VRdNIfJ"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Returns:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"d0CBHEOcDy"}],"key":"vg815vVhh1"}],"key":"OoV9y56NJ0"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"None","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"ceL4CHDmia"}],"key":"wLTgREwiMf"}],"key":"HFotk5VLDP"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Functionality:","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"rSdRIWSJC3"}],"key":"bm51YtxAQP"}],"key":"lrtwvnjtAB"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Sends the user message to the chatbot.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"TbnyeioUeD"}],"key":"gj3xsWNg2Y"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Receives and prints the response from the chatbot.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"r5rB2ke7VO"}],"key":"zKjY7O8Lu8"}],"key":"wu6QKwqXnw"},{"type":"code","lang":"","value":"","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"CavbBJSEuq"}],"key":"PTLmc1U6N7"}],"data":{"type":"notebook-content","collapsed":false},"key":"sCGlCI5VIx"},{"type":"block","children":[{"type":"code","lang":"python","executable":true,"value":"def stream_chatbot(message):\n    global chat_output\n    chat_completion_stream = client.chat.completions.create(\n        messages=[\n            {\n                \"role\":\"user\",\n                \"content\":message,\n             },\n        ],\n        model=\"gpt-3.5-turbo\",\n        stream=True\n    )\n    print(chat_completion_stream)\n    for chunk in chat_completion_stream:\n        if chunk.choices[0].delta.content is not None:\n            chat_output.append_stdout(f\"{chunk.choices[0].delta.content}\")\n    chat_output.append_stdout(f\"\\n\")","key":"Ns2GDACEOO"},{"type":"output","id":"9REQ4j1v_rLix5WTZWRzP","data":[],"key":"r7G3I6N0r2"}],"data":{"type":"notebook-code","collapsed":false,"ExecuteTime":{"end_time":"2024-02-21T12:42:13.288125Z","start_time":"2024-02-21T12:42:13.135860Z"}},"key":"lIuBtcTgug"},{"type":"block","children":[{"type":"admonition","class":"dropdown","children":[{"type":"admonitionTitle","children":[{"type":"inlineCode","value":"prompt_user","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"q9qSXNru8k"},{"type":"text","value":" docs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"smHnMq4L3w"}],"key":"xlIv8CvJjL"},{"type":"heading","depth":2,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"inlineCode","value":"prompt_user()","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"YKhhA590bk"}],"identifier":"prompt-user","label":"prompt_user()","html_id":"prompt-user","implicit":true,"key":"rk7CHy0XFM"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"This function prompts the user for input.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"suX1KEUQOd"}],"key":"E4M3WXpR7W"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Parameters:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Y9LruDjXGB"}],"key":"fknfNlHaNa"}],"key":"jIO4bVF2Xf"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"None","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"JEPx4QVP6q"}],"key":"K3Ayghhs4n"}],"key":"yCiw6mxkjL"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Returns:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"SN2CJVaJUh"}],"key":"aLEeFAdq9K"}],"key":"OVH5yKzeZS"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"inlineCode","value":"user_input","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"PyejZ3hcey"},{"type":"text","value":": The input provided by the user.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Sizbr4aZG4"}],"key":"Jc5FBf6gCl"}],"key":"GX3BsetRZF"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Functionality:","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"VsUxx37Ub6"}],"key":"Th60AJcaUg"}],"key":"Oj2cwuArN9"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Displays a prompt for the user to input a message.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"EjvMtt4o7r"}],"key":"xBYAgMiIXe"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Returns the user’s input.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"Uw3gcA6ngK"}],"key":"BCg9MSkVgP"}],"key":"xfjQT68V42"}],"key":"qrYnXC2YmD"}],"data":{"type":"notebook-content","collapsed":false},"key":"LkS34yMPHs"},{"type":"block","children":[{"type":"code","lang":"python","executable":true,"value":"def prompt_user():\n    user_input = input(\"You: \")\n    return user_input","key":"IbhzWTA1Xn"},{"type":"output","id":"sHk5dPKG9AGUcWOw4yMKG","data":[],"key":"yIcQPKkC9H"}],"data":{"type":"notebook-code","collapsed":false,"ExecuteTime":{"end_time":"2024-02-21T12:42:13.325825Z","start_time":"2024-02-21T12:42:13.152057Z"}},"key":"SyBmKEzjRd"},{"type":"block","children":[{"type":"admonition","class":"dropdown","children":[{"type":"admonitionTitle","children":[{"type":"inlineCode","value":"chatbot","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qHPZgIBCZm"},{"type":"text","value":" docs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wAQ91rvk8f"}],"key":"OiwdBdtLlZ"},{"type":"heading","depth":2,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"inlineCode","value":"chatbot(user_message)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"md0zKJEs1x"}],"identifier":"chatbot-user-message","label":"chatbot(user_message)","html_id":"chatbot-user-message","implicit":true,"key":"Tp6W0Ne25d"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"This function interacts with the chatbot based on user input.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"QQ4s1y5haO"}],"key":"vQ43WsrPS7"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Parameters:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"xLt5EJfqhy"}],"key":"Dn3DDgoR2h"}],"key":"IWeZkLZ2F4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"inlineCode","value":"user_message","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"MhZSaXwXKa"},{"type":"text","value":": The message provided by the user.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"I2LPAY5Mx7"}],"key":"sBEvt40bfP"}],"key":"kOaIIN22ct"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Returns:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"wRz6BERQon"}],"key":"pyJcoedAqq"}],"key":"GVFHMeR7T9"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"None","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"nRD2N8AqpR"}],"key":"I7pNtEj0gq"}],"key":"q80j7Ri8Uc"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Functionality:","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"nIUFkk0KqZ"}],"key":"GJ6uH5Xt3h"}],"key":"BPJqvlq2V1"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Initiates interaction with the chatbot by passing the user’s message.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"X3wRoMjjPF"}],"key":"e6J3lDG9kq"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Prints the chatbots response.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"UaH2UiHPIy"}],"key":"aDr4M5t1nb"}],"key":"eIK2IudhBa"}],"key":"UufX7GQpMW"}],"data":{"type":"notebook-content","collapsed":false},"key":"alzL6CX2bu"},{"type":"block","children":[{"type":"code","lang":"python","executable":true,"value":"def chatbot(user_message):\n    global active\n    global chat_output\n    processing_message.set()\n    chat_output.append_stdout(\"Chatbot: \")\n    if user_message.lower() in [\"bye!\", \"quit\", \"exit\"]:\n        chat_output.append_stdout(\"BYE\\n\")\n        active = False\n    else:\n        stream_chatbot(user_message)\n    processing_message.clear()","key":"cHKMkzoU9a"},{"type":"output","id":"wQunNUmr1G7fLJSiutHQ1","data":[],"key":"GesY1dRSvg"}],"data":{"type":"notebook-code","collapsed":false,"ExecuteTime":{"end_time":"2024-02-21T12:42:13.355132Z","start_time":"2024-02-21T12:42:13.169658Z"}},"key":"waYmDXcrdx"},{"type":"block","children":[{"type":"admonition","class":"dropdown","children":[{"type":"admonitionTitle","children":[{"type":"inlineCode","value":"print_user_message","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gtX0qLvc4C"},{"type":"text","value":" docs","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zXW5Hi0AY3"}],"key":"qQomVUbmhC"},{"type":"heading","depth":2,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"inlineCode","value":"print_user_message(user_message)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ybSPYqBIW9"}],"identifier":"print-user-message-user-message","label":"print_user_message(user_message)","html_id":"print-user-message-user-message","implicit":true,"key":"Mzc6vb9Pmf"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"This function prints the user’s message.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"FGjN7URzkn"}],"key":"YPO2ilb8BW"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Parameters:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"C5Fs5t3sfW"}],"key":"xKLbiO0iQF"}],"key":"WbLEEeVNuM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"inlineCode","value":"user_message","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"hHfSzwAjXg"},{"type":"text","value":": The message provided by the user.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"tTmbhrt4bS"}],"key":"Wd18HUaUlj"}],"key":"r3K6jaPHLe"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Returns:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"OG4nrUzKVX"}],"key":"GN9s5MTB19"}],"key":"D7fMxVtyIi"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"None","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"PaosxTWBEH"}],"key":"SfkNbLaY4U"}],"key":"ZKXMqA8YQH"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Functionality:","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"LVnbrA7WaP"}],"key":"NYEOqVJR1g"}],"key":"zdAAuGrAQi"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Prints the user’s message in the format: “You: [user_message]”.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"lKaHWaAUmR"}],"key":"EcuT99OMBF"}],"key":"PVXLuiljkC"}],"key":"DtLr8gMypg"}],"data":{"type":"notebook-content","collapsed":false},"key":"T4XhWknrqj"},{"type":"block","children":[{"type":"code","lang":"python","executable":true,"value":"def print_user_message(user_message):\n    global chat_output\n    chat_output.append_stdout(f\"You: {user_message}\\n\")","key":"pf7gfvFtZG"},{"type":"output","id":"hNJ3vQVYRb7zU1ruPCVPG","data":[],"key":"qVyFgWb2iN"}],"data":{"type":"notebook-code","collapsed":false,"ExecuteTime":{"end_time":"2024-02-21T12:42:13.375803Z","start_time":"2024-02-21T12:42:13.180415Z"}},"key":"C00fvqqKdA"},{"type":"block","children":[{"type":"code","lang":"python","executable":true,"value":"def handle_user_message(user_message):\n    print_user_message(user_message)\n    chatbot(user_message)","key":"YdiLa3Tiid"},{"type":"output","id":"BBu14TPcJBXS5qonAk7Uu","data":[],"key":"fSdvW5KRPF"}],"data":{"type":"notebook-code","collapsed":false,"ExecuteTime":{"end_time":"2024-02-21T12:42:13.377239Z","start_time":"2024-02-21T12:42:13.192034Z"}},"key":"F0RiO6Z7sJ"},{"type":"block","children":[{"type":"code","lang":"python","executable":true,"value":"def on_submit_button_clicked(b):\n    if not processing_message.is_set():\n        handle_user_message(text_input.value)\n        text_input.value=\"\"","key":"kpABrq93LP"},{"type":"output","id":"tLaW1DO35WJjWIA3HxHUB","data":[],"key":"eM7HUL3npI"}],"data":{"type":"notebook-code","collapsed":false,"ExecuteTime":{"end_time":"2024-02-21T12:42:13.378859Z","start_time":"2024-02-21T12:42:13.205203Z"}},"key":"tup8cX5X78"},{"type":"block","children":[{"type":"code","lang":"python","executable":true,"value":"def chat_interface():\n    global text_input\n    text_input = widgets.Text(description=\"Your message: \")\n    submit_button = widgets.Button(description=\"Submit\", disabled=False)\n    \n    submit_button.on_click(on_submit_button_clicked)    \n    \n    display(chat_output, text_input, submit_button)","key":"cq8P1HcBdq"},{"type":"output","id":"vxoGjxbk-R71RgkOII30s","data":[],"key":"O9RUlDRDcy"}],"data":{"type":"notebook-code","collapsed":false,"ExecuteTime":{"end_time":"2024-02-21T12:42:13.380718Z","start_time":"2024-02-21T12:42:13.218523Z"}},"key":"S1JWVTzRQd"},{"type":"block","children":[{"type":"code","lang":"python","executable":true,"value":"def main():\n    new_chat()\n    chat_interface()\n\nif __name__ == \"__main__\": main()","key":"Hi0VWcSinU"},{"type":"output","id":"u_TA8S5Ey4IApECN0c78s","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"Output()","content_type":"text/plain"},"application/vnd.jupyter.widget-view+json":{"content":"{\"version_major\":2,\"version_minor\":0,\"model_id\":\"52e21649e4614214bca0e1a49a0d0de5\"}","content_type":"application/vnd.jupyter.widget-view+json"}}},{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"Text(value='', description='Your message: ')","content_type":"text/plain"},"application/vnd.jupyter.widget-view+json":{"content":"{\"version_major\":2,\"version_minor\":0,\"model_id\":\"68af95adbad546bfb7cb72844235613f\"}","content_type":"application/vnd.jupyter.widget-view+json"}}},{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"Button(description='Submit', style=ButtonStyle())","content_type":"text/plain"},"application/vnd.jupyter.widget-view+json":{"content":"{\"version_major\":2,\"version_minor\":0,\"model_id\":\"8bf58ccaca1c43228c8f0390157a9839\"}","content_type":"application/vnd.jupyter.widget-view+json"}}}],"key":"gm5DEwc35e"}],"data":{"type":"notebook-code","collapsed":false,"ExecuteTime":{"end_time":"2024-02-21T12:44:11.691099Z","start_time":"2024-02-21T12:44:11.620259Z"}},"key":"X979GjFzxl"}],"key":"Aj6raRWvX6"},"references":{"cite":{"order":[],"data":{}}}}